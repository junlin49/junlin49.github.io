---
title: 摄像机模型详解
date: 2020-09-26 22:18:05
tags:
---

# 摄像机几何模型详解

## 针孔模型&透镜

### 问题引出 - 我们如何记录世界？

![图1 如何记录世界？](https://gitee.com/JunLuJun/up/raw/master/20200926200942.png)

如果按照上面图片的设计，物体的每一个点，都会在胶片的同一个地方，留下自己的信息；由此胶片上的每一个地方都是物体每一点的信息集合，根本无法记录现实物体。

### 改进方案 - 针孔摄像机

![图2 针孔摄像机](https://gitee.com/JunLuJun/up/raw/master/20200926201249.png)

与原有的设计相比，此改进方案增加了一个隔板，只留下了一个孔；正如图上所标注的，光线穿过针孔，物体的每一个点，都在胶片的不同位置留下了自己的信息，不会像之前设计的胶片信息杂乱混合。

胶片就这样记录下了物体的信息。

### 针孔摄像机模型

![图3 针孔摄像机模型](https://gitee.com/JunLuJun/up/raw/master/20200926201625.png)

图中的各个参数的含义如下：

> **f** ：摄像机模型的**焦距** 
>
> **O** ：针孔，亦称**光圈**/**摄像机中心** 

像平面与虚拟像平面相对于摄像机中心对称，唯一的不同是，虚拟像平面成像是正的，我们一般都是讨论虚拟像平面；像平面成像是倒着的。

### **相机坐标系下的空间点**与**像平面坐标系上的平面点**之间的映射（1）

![图4 摄像机坐标系与像平面坐标系之间，点的映射关系](https://gitee.com/JunLuJun/up/raw/master/20200926202434.png)

上图各个符号的含义如下：

> P：真实物理空间中的某一点，在摄像机坐标系下，其坐标为（x，y，z）
>
> O：摄像机坐标系的原点
>
> i，j，k：摄像机坐标系的单位向量，构成坐标轴
>
> f：摄像机模型的焦距
>
> C'：像平面坐标系的原点
>
> P'：真实空间点P在成像平面上成像的点，在像平面坐标系下，其坐标为（x'，y'）

以-i方向观察上图，可以简化为：

![图5 以-i方向观察图4](https://gitee.com/JunLuJun/up/raw/master/20200926203254.png)

采用相似三角形法则，可以得出：
$$
\frac{y'}{f}=\frac{y}{z}\Rightarrow y'=f\frac{y}{z}
$$
又因为$ P=\left[\begin{array}{l}
x \\
y \\
z
\end{array}\right] $，$P^{\prime}=\left[\begin{array}{l}
x^{\prime} \\
y^{\prime}
\end{array}\right]$；

所以：
$$
\left\{\begin{array}{1}
x^{\prime}=f \frac{x}{z} \\
y^{\prime}=f \frac{y}{z}
\end{array}\right.
\tag {公式1}
$$

### 透镜

![图2 针孔摄像机](https://gitee.com/JunLuJun/up/raw/master/20200926201249.png)

光圈，亦称针孔；

光圈的尺寸大小与成像的关系：

> 光圈越大，成像越模糊，但是也越亮
>
> 光圈越小，成像越清晰，但是也越暗

光圈越大，穿过光圈的光线越多，因此也更亮，但是随着光圈的增大，物体上不同的，但是相近的位置点，都会发射光线到达胶片上的同一点，因此成像也越模糊。

光圈越小，穿过光圈的光线越少，因此也更暗，但是随着光圈的减小，物体上不同的，发射光线到达胶片上的同一点的概率也越小，因此成像也越模糊。

![图6 光圈尺寸与成像的关系](https://gitee.com/JunLuJun/up/raw/master/20200926211838.png)

毫无疑问，我们最终想要的是既明亮又清晰的图像，如何能在光圈小的情况下，增大亮度，即让物体同一点的光线到胶片上同一点的光线数量越多？

答案是**增加透镜**

![图7 增加透镜](https://gitee.com/JunLuJun/up/raw/master/20200926212145.png)

透镜将物体上同一点的多条光线聚集到胶片上的同一点，增大了亮度

透镜焦距的定义：

![图8 透镜焦距的定义](https://gitee.com/JunLuJun/up/raw/master/20200926212659.png)

> f：透镜的焦距

### **相机坐标系下的空间点**与**像平面坐标系上的平面点**之间的映射（2）

将上述讨论的透镜，加入模型中：

![图9 透镜加入模型](https://gitee.com/JunLuJun/up/raw/master/20200926212904.png)

参数说明：

> f：透镜的焦距
>
> $z_0$：透镜的焦点到胶片的距离
>
> Z’：摄像机模型的焦距

上述参数满足：$Z'=F+Z_0$

以后，以字母f代表摄像机模型的焦距Z‘

### 像平面坐标系下的平面点 在像平面坐标系与像素平面坐标系的转换

<img src="https://gitee.com/JunLuJun/up/raw/master/20200926215929.png" alt="图10 像坐标系与像素坐标系" style="zoom:70%;" />

> 像素坐标系：
>
> - 以胶片的左下角为坐标原点的二维坐标系
> - 单位是像素
>
> 像坐标系：
>
> - 同样成为像平面坐标系，以胶片中心为C’为坐标原点
> - 单位是米

![图11 示意图](https://gitee.com/JunLuJun/up/raw/master/20200926220338.png)

### 摄像机坐标系下的空间点 与 像素坐标系下的平面点 之间的转换

此转换亦为3D与2D之间的转换；

坐标转换为：
$$
\left.(x, y, z) \rightarrow(f k \frac{x}{z}+c_{x}, f l \frac{y}{z}+c_{y}\right)
\\
\alpha = fk
\\
\beta = fl
\tag{公式3}
$$

> k,l单位为pixel/m
>
> f单位为m
>
> $\alpha，\beta$ 单位：pixel

由于上述变换是非线性变换，后续处理采用齐次坐标的概念



## 摄像机几何



## 其他摄像机模型